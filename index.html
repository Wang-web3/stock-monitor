<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>股票实时监控系统</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Microsoft YaHei', Arial, sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh; 
            padding: 20px; 
        }
        .container { 
            max-width: 800px; 
            margin: 0 auto; 
            background: white; 
            border-radius: 15px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.2); 
            overflow: hidden; 
        }
        header { 
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%); 
            color: white; 
            padding: 20px; 
            text-align: center; 
        }
        h1 { margin-bottom: 20px; }
        .search-box { 
            display: flex; 
            gap: 10px; 
            justify-content: center; 
            margin-bottom: 20px; 
        }
        input { 
            padding: 12px 20px; 
            border: none; 
            border-radius: 25px; 
            width: 200px; 
            outline: none; 
        }
        button { 
            padding: 12px 25px; 
            border: none; 
            border-radius: 25px; 
            background: #27ae60; 
            color: white; 
            cursor: pointer; 
        }
        button:hover { background: #219a52; }
        .stock-info { 
            padding: 20px; 
            text-align: center; 
        }
        .price { 
            font-size: 2.5em; 
            font-weight: bold; 
            margin: 10px 0; 
        }
        .up { color: #27ae60; }
        .down { color: #e74c3c; }
        .details { 
            display: grid; 
            grid-template-columns: repeat(2, 1fr); 
            gap: 10px; 
            margin: 20px 0; 
        }
        .detail-item { 
            background: #f8f9fa; 
            padding: 10px; 
            border-radius: 5px; 
        }
        footer { 
            text-align: center; 
            padding: 20px; 
            color: #7f8c8d; 
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>📈 股票实时监控系统</h1>
            <div class="search-box">
                <input type="text" id="stockCode" placeholder="输入股票代码" value="sz002177">
                <button onclick="getStockData()">查询</button>
            </div>
        </header>

        <div class="stock-info" id="stockData">
            <p>请输入股票代码查询实时数据</p>
        </div>

        <footer>
            <p>💰 数据来源: Akshare | ⚠️ 投资有风险，入市需谨慎</p>
        </footer>
    </div>

    <script>
        async function getStockData() {
            const stockCode = document.getElementById('stockCode').value.trim();
            if (!stockCode) return;
            
            try {
                // 使用免费的第三方API代理（避免跨域问题）
                const response = await axios.get(`https://api.allorigins.win/raw?url=${encodeURIComponent(`http://your-python-server.com/api/stock/${stockCode}`)}`);
                
                if (response.data.success) {
                    const stock = response.data.data;
                    const isUp = stock.change >= 0;
                    
                    document.getElementById('stockData').innerHTML = `
                        <h2>${stock.name} (${stockCode})</h2>
                        <div class="price ${isUp ? 'up' : 'down'}">
                            ${stock.current_price.toFixed(2)} 
                            ${isUp ? '+' : ''}${stock.change.toFixed(2)} 
                            (${isUp ? '+' : ''}${stock.change_percent.toFixed(2)}%)
                        </div>
                        <div class="details">
                            <div class="detail-item">开盘: ${stock.open.toFixed(2)}</div>
                            <div class="detail-item">最高: ${stock.high.toFixed(2)}</div>
                            <div class="detail-item">最低: ${stock.low.toFixed(2)}</div>
                            <div class="detail-item">昨收: ${stock.prev_close.toFixed(2)}</div>
                            <div class="detail-item">成交量: ${(stock.volume / 10000).toFixed(2)}万手</div>
                            <div class="detail-item">成交额: ${(stock.turnover / 10000).toFixed(2)}万元</div>
                        </div>
                    `;
                } else {
                    document.getElementById('stockData').innerHTML = `<p>错误: ${response.data.error}</p>`;
                }
            } catch (error) {
                document.getElementById('stockData').innerHTML = `
                    <p>⚠️ 数据获取失败</p>
                    <p>请尝试使用本地运行版本</p>
                    <p>或者联系获取实时数据API</p>
                `;
            }
        }

        // 页面加载时自动查询
        document.addEventListener('DOMContentLoaded', getStockData);
    </script>
</body>
</html>
